{
  "agent_id": "",
  "channel": "voice",
  "last_modification_timestamp": 1760009474289,
  "agent_name": "{{agent_name}}",
  "response_engine": {
    "type": "conversation-flow",
    "version": 0,
    "conversation_flow_id": "conversation_flow_9a1ca568d808"
  },
  "language": "en-US",
  "opt_out_sensitive_data_storage": false,
  "data_storage_setting": "everything",
  "opt_in_signed_url": false,
  "version": 0,
  "is_published": false,
  "version_title": "",
  "post_call_analysis_model": "gpt-4o-mini",
  "pii_config": {
    "mode": "post_call",
    "categories": [
      "date_of_birth",
      "address",
      "ssn",
      "passport",
      "credit_card",
      "bank_account",
      "password",
      "pin",
      "medical_id",
      "customer_account_number",
      "driver_license"
    ]
  },
  "voice_id": "11labs-Cimo",
  "enable_backchannel": false,
  "max_call_duration_ms": 600000,
  "interruption_sensitivity": 0.9,
  "allow_user_dtmf": true,
  "user_dtmf_options": {},
  "retellLlmData": null,
  "conversationFlow": {
    "conversation_flow_id": "conversation_flow_9a1ca568d808",
    "version": 0,
    "global_prompt": "",
    "nodes": [
      {
        "instruction": {
          "type": "prompt",
          "text": "The caller has already stated their request from the welcome. Acknowledge what they said and route them immediately based on their intent. Only speak if you need to clarify something ambiguous—otherwise, let the edges route silently to the appropriate next node.\n\nCurrent date/time: {{dayAndTime}}"
        },
        "name": "Router",
        "edges": [
          {
            "destination_node_id": "node-1759299298668",
            "id": "edge-1759306500001",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller asks about THEIR OWN specific appointment (e.g., 'when is my appointment', 'what time is my booking', 'can you check my appointment'). Route to identification first."
            }
          },
          {
            "destination_node_id": "node-1759267476271",
            "id": "edge-1759286128401",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller asks general business questions about services, hours, policies, or procedures (NOT about their specific appointment)."
            }
          },
          {
            "destination_node_id": "node-1759285368491",
            "id": "edge-1",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to schedule a new appointment."
            }
          },
          {
            "destination_node_id": "node-1759299298668",
            "id": "edge-2",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to modify an existing appointment."
            }
          },
          {
            "destination_node_id": "node-1759299298668",
            "id": "edge-1759286143486",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to cancel an existing appointment."
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759305738582",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller indicates they are ready to end the conversation."
            }
          },
          {
            "destination_node_id": "node-1759286205338",
            "id": "edge-1759286706982",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to speak with a human representative."
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759286171992",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller's intent is unclear or does not match defined categories."
            }
          }
        ],
        "global_node_setting": {
          "condition": "Caller modifies their request or expresses unclear intent requiring re-routing."
        },
        "start_speaker": "agent",
        "id": "start-node-1759266611426",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 1277,
          "y": 2538
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Answer the caller's question about the business. For simple questions like hours, location, services, or policies, answer directly using what you know—keep it to 1-2 sentences. If the question is more complex or you need additional information, use the Answer Question tool. After answering, ask if there's anything else you can help with."
        },
        "name": "Answer Question",
        "edges": [
          {
            "destination_node_id": "node-1759288307521",
            "id": "edge-1759754099768",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Knowledge base lacks sufficient information to answer the question."
            }
          },
          {
            "destination_node_id": "node-1759288307521",
            "id": "edge-1759286493146",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller disputes the answer or needs additional details."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759267974537",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Question has been successfully answered and caller is satisfied."
            }
          },
          {
            "destination_node_id": "node-1759288307521",
            "id": "edge-1759885350328",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Question requires real-time or contextual information beyond knowledge base."
            }
          }
        ],
        "id": "node-1759267476271",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 1777,
          "y": 751
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Let the caller know you'd be happy to have someone call them back during business hours ({{business_hours}}). Collect their information one piece at a time: name, phone number, email address, and what they need help with. Acknowledge each response naturally. Once you have everything, log the lead."
        },
        "name": "Log Lead",
        "edges": [
          {
            "destination_node_id": "node-1759295548716",
            "id": "edge-1759267848412",
            "transition_condition": {
              "type": "prompt",
              "prompt": "All required lead information has been collected for callback."
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759297549853",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller declines callback offer."
            }
          },
          {
            "destination_node_id": "node-1759286205338",
            "id": "edge-1759301888114",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to speak with a human representative."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759267848412-router",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller changes request or asks about different topic."
            }
          }
        ],
        "id": "node-1759267848412",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 4277,
          "y": 2441
        }
      },
      {
        "name": "End Call",
        "id": "node-1759285139512",
        "type": "end",
        "display_position": {
          "x": 6277,
          "y": 3392
        },
        "instruction": {
          "type": "prompt",
          "text": "End call professionally."
        }
      },
      {
        "custom_sip_headers": {},
        "transfer_destination": {
          "type": "predefined",
          "number": "+17734699726"
        },
        "edge": {
          "destination_node_id": "node-1759267848412",
          "id": "edge-1759285209751",
          "transition_condition": {
            "type": "prompt",
            "prompt": "Transfer failed"
          }
        },
        "instruction": {
          "type": "prompt",
          "text": "Inform the caller that their call is being transferred to a human representative."
        },
        "name": "Transfer Call",
        "id": "node-1759285209751",
        "transfer_option": {
          "type": "cold_transfer",
          "show_transferee_as_caller": false
        },
        "type": "transfer_call",
        "display_position": {
          "x": 5277,
          "y": 3202
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Help the caller schedule their appointment. Ask for one piece of information at a time: their name, phone number, email, what service they need, and when they'd like to come in. Acknowledge each answer naturally before moving on. If the service requires additional details, collect those too. Once you have everything, summarize it all back to them and make sure they confirm it's correct before booking.\n\nCurrent date/time: {{dayAndTime}}\nTimezone: {{timezone}}"
        },
        "name": "Gather New Appointment Details",
        "edges": [
          {
            "destination_node_id": "node-1759287172272",
            "id": "edge-1759285368491",
            "transition_condition": {
              "type": "prompt",
              "prompt": "ALL required fields collected (including service-specific properties) AND caller explicitly confirmed details are correct."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759299265144",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller explicitly cancels booking ('never mind', 'cancel that', 'forget it'). Clarifying questions do NOT trigger this."
            }
          }
        ],
        "id": "node-1759285368491",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 2685.5714285714284,
          "y": 133.28571428571425
        }
      },
      {
        "name": "Escalation Logic",
        "edges": [
          {
            "destination_node_id": "node-1759285209751",
            "id": "edge-1759286308989",
            "transition_condition": {
              "type": "prompt",
              "prompt": "The call is received during designated AI support hours when human transfer is available."
            }
          }
        ],
        "id": "node-1759286205338",
        "else_edge": {
          "destination_node_id": "node-1759267848412",
          "id": "edge-1759286205338",
          "transition_condition": {
            "type": "prompt",
            "prompt": "Else"
          }
        },
        "type": "branch",
        "display_position": {
          "x": 4777,
          "y": 2989
        }
      },
      {
        "tool_id": "tool-1759287159165",
        "name": "Book Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759287359647",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759287611013",
            "id": "edge-1759287496188",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759287505026",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759287172272",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 3777,
          "y": 274
        },
        "wait_for_result": true
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Something went wrong with the booking. Explain what the issue is based on the error message, and help the caller fix it. Stay positive and be specific about what needs to change. If a time isn't available, suggest an alternative. If information is in the wrong format, ask for it again. Only ask for the fields that need correction."
        },
        "name": "Re-Verify Appointment Details",
        "edges": [
          {
            "destination_node_id": "node-1759285368491",
            "id": "edge-1759287611013",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller provides corrected appointment information."
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759290069897",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller decides to abandon appointment booking."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759306509467",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to do something else."
            }
          }
        ],
        "id": "node-1759287611013",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 4277,
          "y": 0
        }
      },
      {
        "tool_id": "tool-1759288305078",
        "name": "Answer Question",
        "edges": [
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759294852015",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759298254864",
            "id": "edge-1759294865725",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759294859184",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759288307521",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 3277,
          "y": 1156
        },
        "wait_for_result": true
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Confirm what you just completed for the caller. If you booked an appointment, tell them when it is and that they'll get a confirmation. If you modified or cancelled one, confirm the change. If you logged a callback request, let them know someone will reach out during business hours. Then ask if there's anything else you can help with today."
        },
        "name": "End Call Confirmation",
        "edges": [
          {
            "destination_node_id": "node-1759778806299",
            "id": "edge-1759289883915",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller confirms they are ready to end the conversation."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759290019289",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller has another request."
            }
          }
        ],
        "id": "node-1759289883915",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 5277,
          "y": 212
        }
      },
      {
        "tool_id": "tool-1759295546196",
        "name": "Log Lead",
        "edges": [
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759297634561",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759867986545",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759301979878",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759295548716",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 4777,
          "y": 274
        },
        "wait_for_result": true
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "You don't have the information they're looking for. Apologize briefly and offer helpful alternatives: arrange a callback from someone more knowledgeable, transfer them to a person if available, or help them with something else. Keep it solution-oriented and don't over-explain."
        },
        "name": "Q/A Fail",
        "edges": [
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759298359614",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller accepts callback offer for unanswered question."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759298254864",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller wants to continue with different request."
            }
          },
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759298254864-end",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller is ready to end the conversation."
            }
          }
        ],
        "id": "node-1759298254864",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 3777,
          "y": 1869
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Help the caller find their existing appointment. Ask for their phone number or the name the appointment is under—whatever they prefer. Once you have it, look it up using the identifyAppointment function. Keep your responses brief and acknowledge what they tell you.\n\nCurrent date/time: {{dayAndTime}}\nTimezone: {{timezone}}"
        },
        "name": "Identify Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759299579503",
            "id": "edge-1759299298668",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Sufficient identifying information has been collected."
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759299413073",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller cannot provide sufficient identifying information."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759299298668-router",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller changes request or asks about different topic."
            }
          }
        ],
        "id": "node-1759299298668",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 1777,
          "y": 1633
        }
      },
      {
        "tool_id": "tool-1759299574542",
        "name": "Identify Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759299860372",
            "id": "edge-1759299602214",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759299298668",
            "id": "edge-1759299791730",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759299800128",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759299579503",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 2277,
          "y": 1696
        },
        "wait_for_result": true
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Share the appointment details you found with the caller and confirm it's the right one. Then ask what they'd like to do with it. Listen for whether they want to ask questions about it, change it, or cancel it, and help them accordingly."
        },
        "name": "Operate on Existing Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759288307521",
            "id": "edge-operate-answer",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller asks question about their identified appointment."
            }
          },
          {
            "destination_node_id": "node-1760010000000",
            "id": "edge-operate-modify",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to modify their identified appointment."
            }
          },
          {
            "destination_node_id": "node-1759300500941",
            "id": "edge-operate-cancel",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller requests to cancel their identified appointment."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-operate-abandon",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller satisfied or wants different topic."
            }
          }
        ],
        "id": "node-1759299860372",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 2777,
          "y": 1041
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Find out what the caller wants to change about their appointment. They might want to change the date, time, service, or contact information. Only collect the fields they want to change—don't ask about things they're keeping the same. Confirm each change back to them before proceeding.\n\nCurrent: {{dayAndTime}}\nTimezone: {{timezone}}"
        },
        "name": "Gather Modification Details",
        "edges": [
          {
            "destination_node_id": "node-1759300443418",
            "id": "edge-1760010000001",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller has confirmed all desired changes."
            }
          },
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1760010000002",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller cancels modification request."
            }
          }
        ],
        "id": "node-1760010000000",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 3277,
          "y": 751
        }
      },
      {
        "tool_id": "tool-1759300315801",
        "name": "Modify Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759301968646",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759287611013",
            "id": "edge-1759870963515",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759302058185",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759300443418",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 3777,
          "y": 751
        },
        "wait_for_result": true
      },
      {
        "tool_id": "tool-1759300498371",
        "name": "Cancel Appointment",
        "edges": [
          {
            "destination_node_id": "node-1759289883915",
            "id": "edge-1759301938699",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Success"
            }
          },
          {
            "destination_node_id": "node-1759287611013",
            "id": "edge-1759870980769",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Failure"
            }
          },
          {
            "destination_node_id": "node-1759267848412",
            "id": "edge-1759302005400",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Error"
            }
          }
        ],
        "id": "node-1759300500941",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 3777,
          "y": 2353
        },
        "wait_for_result": true
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "Greet the caller warmly: \"Hello, thank you for calling {{business_name}}. This is {{agent_name}}. How can I help you today?\" Listen carefully to their complete response without interrupting. Be warm, professional, and genuinely interested in helping them.\n\n{{agent_name}}\n{{business_name}}"
        },
        "name": "Welcome",
        "edges": [
          {
            "destination_node_id": "node-1759778806299",
            "id": "edge-1759303421427",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller wishes to end the conversation immediately."
            }
          },
          {
            "destination_node_id": "node-1759818957400",
            "id": "edge-1759305123422",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Caller states their request or responds to greeting."
            }
          }
        ],
        "id": "node-1759303421427",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 227.03495591931744,
          "y": 3259.157896452243
        }
      },
      {
        "instruction": {
          "type": "prompt",
          "text": "End the call warmly: \"Thank you for calling {{business_name}}. Have a wonderful day!\" Keep it brief and genuine. Match the time of day naturally if you'd like.\n\n{{business_name}}"
        },
        "name": "Graceful Goodbye",
        "edges": [
          {
            "id": "edge-1759778806299",
            "transition_condition": {
              "type": "prompt",
              "prompt": "Describe the transition condition"
            }
          }
        ],
        "id": "node-1759778806299",
        "knowledge_base_ids": [],
        "type": "conversation",
        "display_position": {
          "x": 5777,
          "y": 3282
        },
        "skip_response_edge": {
          "destination_node_id": "node-1759285139512",
          "id": "edge-1759778889986",
          "transition_condition": {
            "type": "prompt",
            "prompt": "Skip response"
          }
        }
      },
      {
        "tool_id": "tool-1759818955040",
        "name": "Get Day and Time",
        "edges": [
          {
            "destination_node_id": "start-node-1759266611426",
            "id": "edge-1759821057178",
            "transition_condition": {
              "type": "equation",
              "equations": [
                {
                  "left": "{{dayAndTime}}",
                  "operator": "exists"
                }
              ],
              "operator": "&&"
            }
          }
        ],
        "id": "node-1759818957400",
        "type": "function",
        "tool_type": "local",
        "speak_during_execution": false,
        "display_position": {
          "x": 708.9245209331547,
          "y": 3247.266935455671
        },
        "wait_for_result": true
      }
    ],
    "start_node_id": "node-1759303421427",
    "start_speaker": "agent",
    "tools": [
      {
        "headers": {},
        "parameter_type": "form",
        "method": "POST",
        "query_params": {},
        "description": "Books an appointment.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook/bookAppointment",
        "tool_id": "tool-1759287159165",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "bookAppointment",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "required": ["name", "date", "time", "phone", "timezone", "service"],
          "properties": {
            "date": {
              "type": "string",
              "description": "Appointment date in YYYY-MM-DD format"
            },
            "notes": {
              "type": "string",
              "description": "Any additional notes as plain language."
            },
            "phone": {
              "type": "string",
              "description": "10-digit phone number, optional extension (e.g., 1234567890x123)"
            },
            "timezone": {
              "type": "string",
              "description": "Timezone for the appointment (e.g., America/Chicago). Use value from dayAndTime tool."
            },
            "service": {},
            "name": {
              "type": "string",
              "description": "Full name of the caller"
            },
            "time": {
              "type": "string",
              "description": "Appointment time in 24-hour format HH:MM (local time)"
            }
          }
        }
      },
      {
        "headers": {},
        "parameter_type": "json",
        "method": "POST",
        "query_params": {},
        "description": "Answers questions using RAG agent with Google Calendar, Drive, and Sheets access. Two modes: (1) General business questions without context, (2) Identified caller's appointment questions with context populated from identifyAppointment.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook-test/answerQuestion",
        "tool_id": "tool-1759288305078",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "answerQuestion",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "properties": {
            "question": {
              "type": "string",
              "description": "The caller's question. For general business questions, this can be any company-related query. For personal appointment questions, only use after identifyAppointment verification."
            },
            "context": {
              "type": "string",
              "description": "Optional. Leave empty for general business questions. Populate with appointment details from identifyAppointment response when caller asks about their specific appointment. RAG uses this to provide personalized answers while protecting other customers' privacy."
            }
          },
          "required": ["question"]
        }
      },
      {
        "headers": {},
        "parameter_type": "form",
        "method": "POST",
        "query_params": {},
        "description": "Logs a lead/callback request.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook/logLead",
        "tool_id": "tool-1759295546196",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "logLead",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "required": ["phone", "name", "email"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Caller’s full name, if provided."
            },
            "service_interest": {
              "type": "string",
              "description": "The service or product the caller expressed interest in."
            },
            "notes": {
              "type": "string",
              "description": "Free-form notes about the conversation, unanswered questions, or follow-up needed."
            },
            "phone": {
              "type": "string",
              "description": "Caller’s phone number, if provided."
            },
            "email": {
              "type": "string",
              "description": "Caller’s email address, if provided."
            },
            "timestamp": {
              "type": "string",
              "description": "Time the lead was logged."
            }
          }
        }
      },
      {
        "headers": {},
        "parameter_type": "form",
        "method": "POST",
        "query_params": {},
        "description": "Searches for appointments in Google Calendar and spreadsheet records using provided search criteria. Returns matching appointment details including appointment_id needed for modifications or cancellations.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook/identifyAppointment",
        "tool_id": "tool-1759299574542",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "identifyAppointment",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "required": ["name", "phone"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Caller's full name to search for in appointment records."
            },
            "date": {
              "type": "string",
              "description": "Appointment date in YYYY-MM-DD format to narrow search results."
            },
            "context": {
              "type": "string",
              "description": "Additional contextual information that might help identify the appointment (e.g., service type, approximate time)."
            },
            "phone": {
              "type": "string",
              "description": "Caller's phone number to search for in appointment records."
            },
            "query": {
              "type": "string",
              "description": "Natural language search query combining any details the caller provided (e.g., 'haircut appointment next Tuesday' or 'John Smith 2pm')."
            }
          }
        }
      },
      {
        "headers": {},
        "parameter_type": "json",
        "method": "POST",
        "query_params": {},
        "description": "Modifies an existing appointment. Only include fields being changed in the updates object.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook-test/modifyAppointment",
        "tool_id": "tool-1759300315801",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "modifyAppointment",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "required": ["appointment_id", "updates"],
          "properties": {
            "updates": {
              "type": "object",
              "description": "Object containing ONLY the fields to be changed. Available fields: name, date (YYYY-MM-DD), time (HH:MM 24-hour), phone, service, timezone, notes.",
              "properties": {
                "date": {
                  "type": "string",
                  "description": "Updated appointment date in YYYY-MM-DD format"
                },
                "notes": {
                  "type": "string",
                  "description": "Updated appointment notes"
                },
                "phone": {
                  "type": "string",
                  "description": "Updated phone number"
                },
                "service": {},
                "timezone": {
                  "type": "string",
                  "description": "Updated IANA timezone (e.g., 'America/Chicago'). Use {{timezone}} variable."
                },
                "name": {
                  "type": "string",
                  "description": "Updated customer name"
                },
                "time": {
                  "type": "string",
                  "description": "Updated appointment time in HH:MM 24-hour format"
                }
              }
            },
            "appointment_id": {
              "type": "string",
              "description": "Google Calendar Event ID from identifyAppointment response (use EXACT value)."
            }
          }
        }
      },
      {
        "headers": {},
        "parameter_type": "json",
        "method": "POST",
        "query_params": {},
        "description": "Cancels an appointment.",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook-test/cancelAppointment",
        "tool_id": "tool-1759300498371",
        "args_at_root": true,
        "timeout_ms": 120000,
        "name": "cancelAppointment",
        "response_variables": {},
        "parameters": {
          "type": "object",
          "required": ["appointment_id"],
          "properties": {
            "appointment_id": {
              "type": "string",
              "description": "Backend-specific identifier for the appointment (Google Calendar event.id, CRM booking ID, etc.)."
            },
            "reason": {
              "type": "string",
              "description": "Optional reason for cancellation provided by the caller."
            }
          }
        }
      },
      {
        "headers": {},
        "parameter_type": "json",
        "method": "GET",
        "query_params": {},
        "description": "Gets day and time",
        "type": "custom",
        "url": "https://n8n.srv836523.hstgr.cloud/webhook/dayAndTime",
        "tool_id": "tool-1759818955040",
        "args_at_root": false,
        "timeout_ms": 120000,
        "name": "dayAndTime",
        "response_variables": {
          "timezone": "data.timezone",
          "dayAndTime": "data.currentDate"
        },
        "parameters": {
          "type": "object",
          "properties": {},
          "required": []
        }
      }
    ],
    "model_choice": {
      "type": "cascading",
      "model": "claude-4.5-sonnet",
      "high_priority": true
    },
    "model_temperature": 0,
    "tool_call_strict_mode": true,
    "default_dynamic_variables": {},
    "knowledge_base_ids": [],
    "kb_config": {
      "top_k": 4,
      "filter_score": 0.6
    },
    "begin_tag_display_position": {
      "x": 0,
      "y": 3406
    },
    "is_published": false
  },
  "llmURL": null
}
